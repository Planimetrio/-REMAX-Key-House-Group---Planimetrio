<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />

  <title>Francesco Anniballi | RE/MAX</title>
  <meta name="description" content="Biglietto da visita digitale - Francesco Anniballi, RE/MAX Key House Group · Team Planimetrio" />
  <link rel="canonical" href="https://planimetrio.github.io/-REMAX-Key-House-Group---Planimetrio/francesco/" />

  <!-- Icons / PWA -->
  <link rel="icon" href="./favicon.ico">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png">
  <link rel="manifest" href="./site.webmanifest">

  <!-- Performance -->
  <link rel="preload" as="image" href="./francesco-anniballi.jpeg" fetchpriority="high">
  <link rel="preload" as="image" href="./remax-logo.jpg" fetchpriority="high">
  <link rel="preload" as="image" href="./hero-bg.jpg">

  <!-- Social preview -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="it_IT" />
  <meta property="og:title" content="Francesco Anniballi | RE/MAX" />
  <meta property="og:description" content="RE/MAX Key House Group · Team Planimetrio" />
  <meta property="og:url" content="https://planimetrio.github.io/-REMAX-Key-House-Group---Planimetrio/francesco/" />
  <meta property="og:image" content="https://planimetrio.github.io/-REMAX-Key-House-Group---Planimetrio/francesco/og.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Francesco Anniballi - RE/MAX Key House Group" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Francesco Anniballi | RE/MAX" />
  <meta name="twitter:description" content="RE/MAX Key House Group · Team Planimetrio" />
  <meta name="twitter:image" content="https://planimetrio.github.io/-REMAX-Key-House-Group---Planimetrio/francesco/og.jpg" />

  <meta name="theme-color" content="#003DA5" />

  <!-- CSP (mantengo compatibile con inline CSS/JS) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src 'self' https: data:;
                 style-src 'self' 'unsafe-inline';
                 script-src 'self' 'unsafe-inline';
                 connect-src 'self';
                 base-uri 'self';
                 frame-ancestors 'none';
                 upgrade-insecure-requests">

  <style>
    /* --- (tutto il tuo CSS invariato) --- */
    :root{
      --remax-blue:#003DA5;
      --remax-red:#DC1C2E;

      --bg:#F6F7FB;
      --card:#FFFFFF;
      --text:#0B1220;
      --muted:#5B667A;
      --line:#E6E8EE;

      --shadow: 0 18px 45px rgba(11,18,32,.10);
      --shadow2: 0 14px 28px rgba(11,18,32,.10);
      --radius:24px;

      --focus: rgba(0,61,165,.18);
    }

    *{box-sizing:border-box}
    html,body{margin:0}

    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 260px at 50% -140px, rgba(0,61,165,.18), transparent 65%),
        radial-gradient(900px 260px at 50% 40px, rgba(220,28,46,.12), transparent 65%),
        var(--bg);
      padding:22px 14px calc(108px + env(safe-area-inset-bottom));
      -webkit-text-size-adjust:100%;
    }

    .wrap{max-width:620px;margin:0 auto}
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .logo-wrap{
      display:flex;
      justify-content:center;
      padding:18px 18px 10px;
      background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,1));
      border-bottom:1px solid var(--line);
    }
    .logo{
      height: clamp(44px, 6vw, 72px);
      width:auto;
      display:block;
    }

    .hero{
      position:relative;
      padding:18px 18px 22px;
      text-align:center;
      background:#fff;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(rgba(255,255,255,.88), rgba(255,255,255,.88)),
        url("./hero-bg.jpg") center / cover no-repeat;
      filter: grayscale(100%) contrast(.92) brightness(1.05);
      z-index:0;
    }
    .hero > *{position:relative; z-index:1;}

    @media (max-width:420px){
      .hero::before{
        background: linear-gradient(rgba(255,255,255,.92), rgba(255,255,255,.92));
        filter:none;
      }
    }

    .avatar{
      width:164px;height:164px;border-radius:999px;
      margin:8px auto 14px;
      object-fit:cover;
      background:#EEF2F7;
      display:block;
      border:7px solid rgba(255,255,255,.96);
      box-shadow:0 22px 44px rgba(11,18,32,.18);
      outline:1px solid rgba(0,61,165,.10);
    }

    h1{
      margin:0;
      font-size:28px;
      letter-spacing:-.03em;
      line-height:1.12;
    }

    .role{
      margin:10px 0 0;
      display:flex;
      gap:8px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(0,61,165,.18);
      background: rgba(0,61,165,.06);
      color: var(--remax-blue);
      font-weight:900;
      font-size:13px;
      line-height:1;
      white-space:nowrap;
    }
    .badge.alt{
      border-color: rgba(220,28,46,.18);
      background: rgba(220,28,46,.06);
      color: #b51625;
    }

    .sub{
      margin:12px auto 0;
      max-width:520px;
      color:var(--muted);
      font-size:14px;
      line-height:1.55;
    }

    .actions{
      padding:14px 18px 18px;
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      border-top:1px solid var(--line);
      background:#fff;
    }

    .btn{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      text-decoration:none;
      border-radius:16px;
      padding:14px 14px;
      font-weight:900;
      border:1px solid var(--line);
      background:#fff;
      color:var(--text);
      box-shadow:0 1px 0 rgba(11,18,32,.03);
      transition: transform .08s ease, box-shadow .18s ease, border-color .18s ease;
      min-width:0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{box-shadow:var(--shadow2); transform:translateY(-1px); border-color: rgba(0,61,165,.18)}
    .btn:active{transform:translateY(0px); box-shadow:0 8px 18px rgba(11,18,32,.10)}
    .btn:focus{outline:none}
    .btn:focus-visible{outline:3px solid var(--focus); outline-offset:2px}

    .btn.primary{
      background:var(--remax-red);
      color:#fff;
      border-color:transparent;
      box-shadow:0 16px 30px rgba(220,28,46,.24);
    }
    .btn.secondary{
      border-color: rgba(0,61,165,.22);
      color: var(--remax-blue);
      background:#fff;
    }

    .section{
      border-top:1px solid var(--line);
      padding:18px;
      background:#fff;
    }
    .section h2{
      margin:0 0 12px;
      font-size:13px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--muted);
    }

    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }

    .tile{
      display:flex;
      align-items:flex-start;
      gap:12px;
      padding:14px;
      border:1px solid var(--line);
      border-radius:18px;
      background:#fff;
      transition: box-shadow .18s ease, transform .08s ease, border-color .18s ease;
      min-width:0;
    }
    .tile:hover{
      box-shadow:var(--shadow2);
      transform:translateY(-1px);
      border-color: rgba(0,61,165,.16);
    }

    .tile b{display:block}
    .small{color:var(--muted);font-size:13px;margin-top:3px;line-height:1.35}
    .tile a{color:inherit;text-decoration:none}
    .tile a:hover{text-decoration:underline}

    .i{
      width:20px;
      height:20px;
      stroke: var(--remax-blue);
      stroke-width:2;
      fill:none;
      stroke-linecap:round;
      stroke-linejoin:round;
      flex:0 0 auto;
      display:block;
      margin-top:2px;
    }
    .btn.primary .i,
    .sbtn.primary .i{ stroke:#fff; }

    .wa-fill{
      width:20px;
      height:20px;
      flex:0 0 auto;
      display:block;
      color: var(--remax-blue);
    }
    .btn.primary .wa-fill,
    .sbtn.primary .wa-fill{ color:#fff; }

    .social-row{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
      width:100%;
    }
    .soc{
      width:100%;
      height:48px;
      border-radius:999px;
      background:#111;
      display:flex;
      align-items:center;
      justify-content:center;
      text-decoration:none;
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      border:1px solid rgba(0,0,0,.08);
      transition: transform .08s ease, box-shadow .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .soc:hover{transform: translateY(-2px); box-shadow: 0 14px 30px rgba(0,0,0,.18);}
    .soc svg{width:22px;height:22px;display:block;}
    .soc svg path{ fill:#fff; }
    .soc:focus{outline:none}
    .soc:focus-visible{outline:3px solid var(--focus); outline-offset:3px}

    .soc svg.ig{
      fill:none !important;
      stroke:#fff !important;
      stroke-width:2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }
    .soc svg.ig *{ fill:none !important; }

    @media (max-width:360px){
      .soc{height:44px}
      .soc svg{width:20px;height:20px}
    }

    .sticky{
      position:fixed;
      left:0; right:0; bottom:0;
      padding:10px 12px calc(12px + env(safe-area-inset-bottom));
      background:rgba(246,247,251,.82);
      backdrop-filter: blur(10px);
      border-top:1px solid rgba(230,232,238,.95);
      z-index:999;
    }
    .sticky .inner{
      max-width:620px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
    }
    .sbtn{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:12px 10px;
      border-radius:16px;
      border:1px solid var(--line);
      background:#fff;
      color:var(--text);
      font-weight:900;
      text-decoration:none;
      box-shadow:0 8px 18px rgba(11,18,32,.08);
      min-width:0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      font-size:14px;
      transition: transform .08s ease, box-shadow .18s ease, border-color .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .sbtn:hover{
      box-shadow: var(--shadow2);
      transform: translateY(-1px);
      border-color: rgba(0,61,165,.18);
    }
    .sbtn.primary{
      background:var(--remax-red);
      color:#fff;
      border-color:transparent;
      box-shadow:0 14px 26px rgba(220,28,46,.22);
    }
    .sbtn:focus{outline:none}
    .sbtn:focus-visible{outline:3px solid var(--focus); outline-offset:2px}

    .lbl{min-width:0; overflow:hidden; text-overflow:ellipsis}
    @media (max-width:410px){
      .sticky .inner{gap:8px}
      .sbtn{padding:11px 8px; font-size:13px}
    }
    @media (max-width:360px){
      .sbtn .lbl{display:none}
      .sbtn{gap:0}
    }

    @media (min-width:560px){
      .actions{grid-template-columns:1fr 1fr}
      .actions .btn:last-child{grid-column:1 / -1}
      .grid{grid-template-columns:1fr 1fr}
    }

    @media (min-width:980px){
      .wrap{max-width:760px}
      .actions{gap:14px}
      .btn{padding:16px 18px; font-size:16px}
    }

    .mini-link{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(0,61,165,.18);
      background: rgba(0,61,165,.06);
      color: var(--remax-blue);
      font-weight:900;
      font-size:13px;
      text-decoration:none;
      -webkit-tap-highlight-color: transparent;
    }
    .mini-link:hover{box-shadow:0 12px 24px rgba(11,18,32,.08); transform:translateY(-1px)}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">

      <div class="logo-wrap">
        <img class="logo" src="./remax-logo.jpg" alt="RE/MAX"
             loading="eager" decoding="async" fetchpriority="high">
      </div>

      <div class="hero">
        <img class="avatar" src="./francesco-anniballi.jpeg" alt="Foto profilo Francesco Anniballi"
             loading="eager" decoding="async" width="164" height="164" fetchpriority="high">
        <h1>Francesco Anniballi</h1>

        <div class="role" aria-label="Ruolo e team">
          <span class="badge">RE/MAX Key House Group</span>
          <span class="badge alt">Team Planimetrio</span>
        </div>

        <div class="sub">Valutazioni accurate · Strategia di vendita · Supporto fino al rogito.</div>
      </div>

      <div class="actions">
        <a class="btn primary" href="tel:+393292628540">
          <svg class="i" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.8 19.8 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.8 19.8 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.8 12.8 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.8 12.8 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
          </svg>
          Chiama
        </a>

        <a class="btn secondary"
           href="https://wa.me/393292628540?text=Ciao%20Francesco%2C%20ho%20visto%20il%20tuo%20biglietto%20digitale%20e%20vorrei%20informazioni."
           target="_blank" rel="noopener noreferrer" referrerpolicy="no-referrer" aria-label="WhatsApp">
          <svg class="wa-fill" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M12.04 2C6.57 2 2.13 6.44 2.13 11.91c0 1.73.45 3.42 1.3 4.9L2 22l5.33-1.4a9.86 9.86 0 0 0 4.71 1.2h.01c5.47 0 9.9-4.44 9.9-9.9C21.95 6.44 17.51 2 12.04 2zm5.76 14.3c-.24.68-1.4 1.3-1.92 1.38-.48.07-1.1.1-1.78-.11-.41-.13-.93-.3-1.6-.6-2.82-1.22-4.66-4.1-4.8-4.29-.13-.19-1.14-1.52-1.14-2.9 0-1.38.72-2.05.98-2.33.25-.28.56-.35.74-.35h.54c.17 0 .4-.03.62.47.24.58.81 2 .88 2.14.07.15.11.32.02.51-.08.19-.13.32-.26.49-.13.17-.27.38-.39.5-.13.13-.26.27-.11.52.15.25.68 1.12 1.46 1.81 1 .88 1.84 1.15 2.1 1.28.26.13.41.11.56-.06.15-.17.64-.74.81-1 .17-.26.34-.21.57-.13.24.08 1.5.71 1.75.84.26.13.43.19.49.3.06.11.06.64-.18 1.32z"/>
          </svg>
          WhatsApp
        </a>

        <a class="btn" href="mailto:francesco.anniballi@remax.it?subject=Richiesta%20informazioni">
          <svg class="i" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="4" y="6" width="16" height="12" rx="2"/>
            <path d="M4 8l8 6 8-6"/>
          </svg>
          Email
        </a>

        <!-- vCard: più compatibile -->
        <a class="btn" href="./francesco-anniballi.vcf" type="text/vcard" download="francesco-anniballi.vcf">
          <svg class="i" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 3v12"/>
            <path d="M7 10l5 5 5-5"/>
            <path d="M5 21h14"/>
          </svg>
          Salva contatto
        </a>
      </div>

      <!-- (resto del tuo HTML invariato, incluse le posizioni e social) -->
      <!-- IMPORTANTE: nelle mini-link Mappe lasciamo href="#" ma gestiamo bene in JS -->
      <!-- ... -->
    </div>
  </div>

  <!-- ✅ vCard: comportamento iOS reale (Safari spesso ignora download e preferisce “aprire”) -->
  <script>
  (function(){
    var ua = navigator.userAgent || '';
    var isIOS = /iPhone|iPad|iPod/i.test(ua);
    if(!isIOS) return;

    // Su iOS è spesso meglio aprire la vCard invece di forzare download
    document.querySelectorAll('a[href$=".vcf"]').forEach(function(el){
      el.removeAttribute('download');
    });
  })();
  </script>

  <!-- ✅ Smart Maps: iOS Apple Maps (HTTPS) / Android geo / fallback web -->
  <script>
  (function(){
    var ua = navigator.userAgent || '';
    var isAndroid = /Android/i.test(ua);
    var isIOS = /iPhone|iPad|iPod/i.test(ua);

    function openMaps(query){
      var q = encodeURIComponent(query);

      if(isIOS){
        window.location.href = "https://maps.apple.com/?q=" + q;
        return;
      }

      if(isAndroid){
        var geoUrl = "geo:0,0?q=" + q;
        var webUrl = "https://www.google.com/maps/search/?api=1&query=" + q;

        // Prova geo:, fallback se bloccato
        var timer = setTimeout(function(){
          window.location.href = webUrl;
        }, 700);

        window.location.href = geoUrl;

        window.addEventListener('pagehide', function(){ clearTimeout(timer); }, { once:true });
        window.addEventListener('blur', function(){ clearTimeout(timer); }, { once:true });
        return;
      }

      window.open("https://www.google.com/maps/search/?api=1&query=" + q, "_blank", "noopener");
    }

    document.querySelectorAll(".map-smart").forEach(function(a){
      a.addEventListener("click", function(e){
        e.preventDefault();
        var q = a.getAttribute("data-q") || "";
        if(!q) return;
        openMaps(q);
      });
    });
  })();
  </script>

  <!-- Instagram: deep link + fallback (il tuo è ok; lo lascio invariato) -->
  <script>
  (function(){
    var a = document.querySelector('.ig-open');
    if(!a) return;

    var raw = (a.getAttribute('data-ig') || 'planimetrio').trim();
    var ok = /^[a-zA-Z0-9._]{1,30}$/.test(raw);
    var user = ok ? raw : 'planimetrio';

    var web  = 'https://www.instagram.com/' + user + '/';

    var ua = navigator.userAgent || '';
    var isAndroid = /Android/i.test(ua);
    var isIOS = /iPhone|iPad|iPod/i.test(ua);

    a.href = web;

    if(!isIOS && !isAndroid) return;

    a.addEventListener('click', function(e){
      e.preventDefault();

      function openWeb(){
        if (a.target === '_blank') {
          window.open(web, '_blank', 'noopener');
        } else {
          window.location.href = web;
        }
      }

      if(isIOS){
        var ios = 'instagram://user?username=' + encodeURIComponent(user);
        var t1 = setTimeout(openWeb, 900);
        window.location.href = ios;
        window.addEventListener('pagehide', function(){ clearTimeout(t1); }, { once:true });
        window.addEventListener('blur', function(){ clearTimeout(t1); }, { once:true });
        return;
      }

      if(isAndroid){
        var intent = 'intent://www.instagram.com/' + encodeURIComponent(user) +
          '/#Intent;package=com.instagram.android;scheme=https;end';
        var t2 = setTimeout(openWeb, 900);
        window.location.href = intent;
        window.addEventListener('pagehide', function(){ clearTimeout(t2); }, { once:true });
        window.addEventListener('blur', function(){ clearTimeout(t2); }, { once:true });
        return;
      }

      openWeb();
    });
  })();
  </script>
</body>
</html>
